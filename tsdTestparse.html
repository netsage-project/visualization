<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<link rel="icon" href="favicon.ico">
		<title>Main Page</title>
	</head>
	<!-- ===================================================================================================================== Body -->
	<body onload="main()">


		<div id='topdv'>
			Check console.
		</div>



		<!-- JavaScript references placed at the end of the document so the pages load faster -->
		<script type="text/javascript" src="tsdVarPrefix.js"></script>

		<script type="text/javascript">

		function main() {
			console.log( "Attempting to isolate aggregate from tsdVarPrefix." );

			var stringFromAggregate = tsdObj.query.substring(0); //make a copy of string
			var insideParens;
			var partsOfParens;
			var i = 0;

			while(stringFromAggregate.indexOf("aggregate") >= 0) {
				stringFromAggregate = stringFromAggregate.substring( stringFromAggregate.indexOf("aggregate") + 9);
				i++;
			}

			console.log("Detected " + i + " instances of aggregate");

			

			stringFromAggregate = tsdObj.query.substring(0);
			i = 1;
			while(stringFromAggregate.indexOf("aggregate") >= 0) {
				stringFromAggregate = stringFromAggregate.substring( stringFromAggregate.indexOf("aggregate"));
				stringFromAggregate = stringFromAggregate.substring( stringFromAggregate.indexOf("(") + 1);
				insideParens = stringFromAggregate.substring( 0, stringFromAggregate.indexOf(")" ));

				console.log("Instance " + i + " full inner parenthesis contents:" + insideParens);
				partsOfParens = insideParens.split(",");
				for(var j = 0; j < partsOfParens.length; j++) {
					console.log("Individual parts " + j + "("+(typeof partsOfParens[j])+"):" + partsOfParens[j]);
				}
				i++;
			}

			console.log("After testing this, the parts are being detected as strings. If you need a conversion of the 6521 use parseInt");

			var ns = "6521";
			console.log("This is a string: " + ns + "(" + (typeof ns) + ")" );
			console.log("This is a number: " + (parseInt(ns)) + "(" + (typeof parseInt(ns)) + ")" );

		}


		</script>

	</body>
</html>